# AI åŠ©æ‰‹ç³»çµ±æµç¨‹åœ–

## ğŸ¯ æ ¸å¿ƒæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ç”¨æˆ¶äº’å‹•å±¤                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  ç”¨æˆ¶è¼¸å…¥ï¼š                            â”‚
        â”‚  "å¹«æˆ‘å»ºç«‹12æœˆå»äºŒä¸–è°·å’Œç™½é¦¬çš„è¡Œç¨‹"      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      å‰ç«¯è™•ç†å±¤                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  AIChatWidget                                                   â”‚
â”‚    â†“                                                             â”‚
â”‚  useAIChat Hook                                                 â”‚
â”‚    â†“                                                             â”‚
â”‚  aiAssistantApi.chat({                                          â”‚
â”‚    messages: [                                                   â”‚
â”‚      { role: "user", content: "å¹«æˆ‘å»ºç«‹..." }                   â”‚
â”‚    ]                                                             â”‚
â”‚  })                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼ HTTP POST /ai-assistant/chat
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      å¾Œç«¯ API å±¤                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  FastAPI Endpoint: /ai-assistant/chat                           â”‚
â”‚    â†“                                                             â”‚
â”‚  é©—è­‰ç”¨æˆ¶èº«ä»½ï¼ˆJWT Tokenï¼‰                                        â”‚
â”‚    â†“                                                             â”‚
â”‚  AIAssistantService.chat(user_id, messages)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AI Provider é©é…å±¤                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ ¹æ“šç’°å¢ƒè®Šæ•¸é¸æ“‡ Providerï¼š                                      â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ OpenAI       â”‚  â”‚ Anthropic    â”‚  â”‚ Gemini       â”‚          â”‚
â”‚  â”‚ GPT-4o       â”‚  â”‚ Claude 3.5   â”‚  â”‚ Gemini 2.0   â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                             â”‚                                     â”‚
â”‚  ç™¼é€è«‹æ±‚ï¼š                                                       â”‚
â”‚  {                                                                â”‚
â”‚    model: "claude-3-5-sonnet-20241022",                         â”‚
â”‚    messages: [...],                                              â”‚
â”‚    tools: [                                                       â”‚
â”‚      { name: "create_multiple_trips", ... },                    â”‚
â”‚      { name: "get_my_trips", ... }                              â”‚
â”‚    ]                                                              â”‚
â”‚  }                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      AI ç†è§£èˆ‡æ±ºç­–                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  AI åˆ†æç”¨æˆ¶æ„åœ–ï¼š                                                â”‚
â”‚  1. è­˜åˆ¥é—œéµè³‡è¨Šï¼š                                                â”‚
â”‚     - é›ªå ´ï¼šäºŒä¸–è°·ã€ç™½é¦¬                                          â”‚
â”‚     - æ™‚é–“ï¼š12æœˆ                                                 â”‚
â”‚     - å‹•ä½œï¼šå»ºç«‹è¡Œç¨‹                                             â”‚
â”‚                                                                   â”‚
â”‚  2. é¸æ“‡å·¥å…·ï¼šcreate_multiple_trips                             â”‚
â”‚                                                                   â”‚
â”‚  3. ç”Ÿæˆåƒæ•¸ï¼š                                                   â”‚
â”‚     {                                                             â”‚
â”‚       "trips": [                                                  â”‚
â”‚         {                                                         â”‚
â”‚           "resort": "äºŒä¸–è°·",                                    â”‚
â”‚           "start_date": "2024-12-01",                           â”‚
â”‚           "end_date": "2024-12-05"                              â”‚
â”‚         },                                                        â”‚
â”‚         {                                                         â”‚
â”‚           "resort": "ç™½é¦¬",                                      â”‚
â”‚           "start_date": "2024-12-15",                           â”‚
â”‚           "end_date": "2024-12-17"                              â”‚
â”‚         }                                                         â”‚
â”‚       ]                                                           â”‚
â”‚     }                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Tool Executor å±¤                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  CreateMultipleTripsTool.execute(user_id, **args)               â”‚
â”‚    â†“                                                             â”‚
â”‚  å°æ¯å€‹è¡Œç¨‹ï¼š                                                     â”‚
â”‚    1. è§£æé›ªå ´åç¨±                                               â”‚
â”‚       "äºŒä¸–è°·" â†’ resort_id: "niseko"                            â”‚
â”‚       "ç™½é¦¬" â†’ resort_id: "hakuba"                              â”‚
â”‚                                                                   â”‚
â”‚    2. è§£ææ—¥æœŸ                                                   â”‚
â”‚       "12æœˆ" â†’ "2024-12-01"                                     â”‚
â”‚                                                                   â”‚
â”‚    3. è¨ˆç®—é›ªå­£ ID                                                â”‚
â”‚       12æœˆ â†’ season_id: "2024-2025"                            â”‚
â”‚                                                                   â”‚
â”‚    4. æ§‹å»ºå®Œæ•´æ•¸æ“š                                               â”‚
â”‚       {                                                           â”‚
â”‚         season_id: "2024-2025",                                 â”‚
â”‚         resort_id: "niseko",                                    â”‚
â”‚         start_date: "2024-12-01",                               â”‚
â”‚         end_date: "2024-12-05",                                 â”‚
â”‚         flexibility: "fixed",                                    â”‚
â”‚         visibility: "private",                                   â”‚
â”‚         ...                                                       â”‚
â”‚       }                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ¥­å‹™é‚è¼¯ API å±¤                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  tripPlanningApi.createTrip(user_id, trip_data)                 â”‚
â”‚    â†“                                                             â”‚
â”‚  POST /trip-planning/trips?user_id=xxx                          â”‚
â”‚    â†“                                                             â”‚
â”‚  é©—è­‰æ•¸æ“š â†’ ä¿å­˜åˆ°è³‡æ–™åº« â†’ è¿”å›å‰µå»ºçš„è¡Œç¨‹                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      çµæœå›å‚³å±¤                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Tool è¿”å›çµæœï¼š                                                  â”‚
â”‚  {                                                                â”‚
â”‚    success: true,                                                â”‚
â”‚    message: "æˆåŠŸå‰µå»º 2 å€‹è¡Œç¨‹ï¼š\n                               â”‚
â”‚              âœ“ äºŒä¸–è°· Niseko (2024-12-01 ~ 2024-12-05)\n       â”‚
â”‚              âœ“ ç™½é¦¬ Hakuba (2024-12-15 ~ 2024-12-17)",         â”‚
â”‚    data: { trips: [...] }                                        â”‚
â”‚  }                                                                â”‚
â”‚    â†“                                                             â”‚
â”‚  AI å°‡çµæœæ ¼å¼åŒ–ç‚ºå‹å¥½è¨Šæ¯                                        â”‚
â”‚    â†“                                                             â”‚
â”‚  è¿”å›çµ¦å‰ç«¯ï¼š                                                     â”‚
â”‚  {                                                                â”‚
â”‚    message: "æˆ‘å·²ç¶“å¹«ä½ å‰µå»ºå¥½è¡Œç¨‹äº†ï¼ğŸ¿\n\n                     â”‚
â”‚             âœ“ äºŒä¸–è°· Niseko (12/1-12/5)\n                       â”‚
â”‚             âœ“ ç™½é¦¬ Hakuba (12/15-12/17)\n\n                     â”‚
â”‚             ç¥ä½ æ»‘é›ªæ„‰å¿«ï¼",                                      â”‚
â”‚    tool_results: [...]                                           â”‚
â”‚  }                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      å‰ç«¯å±•ç¤ºå±¤                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  AIChatWidget é¡¯ç¤º AI å›æ‡‰                                       â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚ ğŸ¤– æˆ‘å·²ç¶“å¹«ä½ å‰µå»ºå¥½è¡Œç¨‹äº†ï¼                  â”‚                 â”‚
â”‚  â”‚                                             â”‚                 â”‚
â”‚  â”‚ âœ“ äºŒä¸–è°· Niseko (12/1-12/5)                â”‚                 â”‚
â”‚  â”‚ âœ“ ç™½é¦¬ Hakuba (12/15-12/17)                â”‚                 â”‚
â”‚  â”‚                                             â”‚                 â”‚
â”‚  â”‚ ç¥ä½ æ»‘é›ªæ„‰å¿«ï¼                               â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ å¤šè¼ªå°è©±æµç¨‹

```
ç”¨æˆ¶: "å¹«æˆ‘æŸ¥è©¢æ˜å¹´1æœˆçš„è¡Œç¨‹"
  â”‚
  â–¼
AI ç†è§£ â†’ èª¿ç”¨ get_my_trips(time_range="upcoming")
  â”‚
  â–¼
AI: "æˆ‘æ‰¾åˆ° 3 å€‹æ˜å¹´1æœˆçš„è¡Œç¨‹ï¼š
     1. ç™½é¦¬ (1/10-1/12)
     2. äºŒä¸–è°· (1/20-1/25)
     3. å¿—è³€é«˜åŸ (1/28-1/30)

     éœ€è¦æˆ‘å¹«ä½ ä¿®æ”¹æˆ–æŸ¥çœ‹è©³æƒ…å—ï¼Ÿ"
  â”‚
  â–¼
ç”¨æˆ¶: "å–æ¶ˆç¬¬ä¸‰å€‹"
  â”‚
  â–¼
AI ç†è§£ â†’ èª¿ç”¨ update_trip(trip_id="...", status="cancelled")
  â”‚
  â–¼
AI: "å·²ç¶“å–æ¶ˆå¿—è³€é«˜åŸçš„è¡Œç¨‹ï¼"
```

---

## ğŸ¨ æ¨¡å‹åˆ‡æ›æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     ç’°å¢ƒè®Šæ•¸é…ç½®                      â”‚
â”‚                                       â”‚
â”‚  AI_PROVIDER=anthropic                â”‚
â”‚  AI_MODEL=claude-3-5-sonnet-20241022 â”‚
â”‚  ANTHROPIC_API_KEY=sk-ant-xxx        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   create_ai_provider()                â”‚
â”‚                                       â”‚
â”‚   if provider == "anthropic":         â”‚
â”‚     return AnthropicAdapter(...)      â”‚
â”‚   elif provider == "openai":          â”‚
â”‚     return OpenAIAdapter(...)         â”‚
â”‚   elif provider == "gemini":          â”‚
â”‚     return GeminiAdapter(...)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     çµ±ä¸€çš„ AIProvider ä»‹é¢            â”‚
â”‚                                       â”‚
â”‚   - chat(messages, tools)             â”‚
â”‚   - format_tool_result(...)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

åˆ‡æ›æ¨¡å‹åªéœ€ï¼š
1. ä¿®æ”¹ç’°å¢ƒè®Šæ•¸
2. é‡å•Ÿæœå‹™
3. ç„¡éœ€ä¿®æ”¹ä»»ä½•æ¥­å‹™ä»£ç¢¼ï¼

---

## ğŸ“± å‰ç«¯çµ„ä»¶çµæ§‹

```
RootLayout
  â””â”€â”€ FloatingAIButton
        â””â”€â”€ (é»æ“Šæ‰“é–‹)
            â””â”€â”€ AIChatWidget
                  â”œâ”€â”€ Header (æ¨™é¡Œã€é—œé–‰æŒ‰éˆ•)
                  â”œâ”€â”€ Messages (å°è©±å€åŸŸ)
                  â”‚     â”œâ”€â”€ ç”¨æˆ¶è¨Šæ¯ (è—è‰²æ³¡æ³¡)
                  â”‚     â””â”€â”€ AI è¨Šæ¯ (ç™½è‰²æ³¡æ³¡)
                  â”œâ”€â”€ Loading Indicator (æ€è€ƒä¸­...)
                  â””â”€â”€ Input (è¼¸å…¥æ¡†ã€ç™¼é€æŒ‰éˆ•)
```

---

## ğŸ” å®‰å…¨æµç¨‹

```
å‰ç«¯è«‹æ±‚
  â”‚
  â–¼
åŒ…å« JWT Token
(Authorization: Bearer xxx)
  â”‚
  â–¼
å¾Œç«¯é©—è­‰ Token
  â”‚
  â”œâ”€ æœ‰æ•ˆ â†’ æå– user_id â†’ åŸ·è¡Œå·¥å…·
  â”‚
  â””â”€ ç„¡æ•ˆ â†’ 401 Unauthorized
```

æ‰€æœ‰å·¥å…·åŸ·è¡Œéƒ½åŸºæ–¼ç•¶å‰ç”¨æˆ¶ IDï¼Œç¢ºä¿å®‰å…¨éš”é›¢ã€‚

---

## ğŸ’¡ ä½¿ç”¨å ´æ™¯ç¤ºä¾‹

### å ´æ™¯ 1ï¼šè¦åŠƒé›ªå­£
```
ç”¨æˆ¶: "æˆ‘æƒ³é€™å€‹é›ªå­£å»æ—¥æœ¬æ»‘é›ªï¼Œ12æœˆäºŒä¸–è°·ï¼Œ1æœˆç™½é¦¬ï¼Œ2æœˆå¿—è³€"
  â†“
AI: å‰µå»º 3 å€‹è¡Œç¨‹
  â†“
çµæœ: "âœ“ å·²å»ºç«‹ 3 å€‹è¡Œç¨‹"
```

### å ´æ™¯ 2ï¼šè¨˜éŒ„é›ªé“
```
ç”¨æˆ¶: "ä»Šå¤©åœ¨ç™½é¦¬æ»‘äº† Happo-One å’Œ Skylineï¼Œè¶…æ£’ï¼"
  â†“
AI: è¨˜éŒ„ 2 æ¢é›ªé“
  â†“
çµæœ: "âœ“ å·²è¨˜éŒ„ 2 æ¢é›ªé“ï¼Œè©•åˆ† 5 åˆ†"
```

### å ´æ™¯ 3ï¼šæŸ¥è©¢é€²åº¦
```
ç”¨æˆ¶: "æˆ‘åœ¨äºŒä¸–è°·æ»‘äº†å¹¾æ¢é›ªé“ï¼Ÿ"
  â†“
AI: æŸ¥è©¢é€²åº¦
  â†“
çµæœ: "ä½ åœ¨äºŒä¸–è°·æ»‘äº† 15 æ¢é›ªé“ï¼Œå®Œæˆåº¦ 30%"
```

---

## ğŸš€ æ“´å±•é»

ç³»çµ±è¨­è¨ˆç‚ºé«˜åº¦å¯æ“´å±•ï¼š

1. **æ·»åŠ æ–°å·¥å…·**ï¼šç¹¼æ‰¿ `Tool` åŸºé¡å³å¯
2. **åˆ‡æ› AI æ¨¡å‹**ï¼šä¿®æ”¹ç’°å¢ƒè®Šæ•¸
3. **æ·»åŠ æ–°åŠŸèƒ½**ï¼šåœ¨å‰ç«¯æ·»åŠ å¿«æ·æŒ‡ä»¤
4. **è‡ªå®šç¾©å›æ‡‰**ï¼šèª¿æ•´ç³»çµ±æç¤ºè©

---

é€™å°±æ˜¯å®Œæ•´çš„ AI åŠ©æ‰‹ç³»çµ±ï¼ğŸ¿
