# Resort Services - 漸進式重構清單

**創建時間:** 2025-12-02  
**狀態追蹤:** ⏳ 待辦 | 🔄 進行中 | ✅ 完成

---

## 🔴 高優先級 - 後端 API 實作

### 1. ⏳ 創建 FastAPI 後端項目結構
**優先級:** P0 (最高)  
**預估時間:** 1 小時  

#### 子任務：
- [ ] 1.1 創建 `api/` 目錄結構
- [ ] 1.2 創建 `requirements.txt`
- [ ] 1.3 創建 `main.py` 入口點
- [ ] 1.4 實作 `/health` 端點
- [ ] 1.5 配置 CORS

---

### 2. ⏳ 實作數據層
**優先級:** P0 (最高)  
**預估時間:** 2 小時  

#### 子任務：
- [ ] 2.1 創建 `models/resort.py` - Pydantic 模型
- [ ] 2.2 創建 `services/data_loader.py` - YAML 加載
- [ ] 2.3 創建 `services/data_store.py` - 數據存儲
- [ ] 2.4 實作遞迴掃描 YAML 文件
- [ ] 2.5 實作數據驗證

---

### 3. ⏳ 實作核心 API 端點
**優先級:** P0 (最高)  
**預估時間:** 2 小時  

#### 子任務：
- [ ] 3.1 實作 `GET /resorts` - 列表端點
- [ ] 3.2 實作篩選功能 (region, country_code)
- [ ] 3.3 實作搜尋功能 (q 參數)
- [ ] 3.4 實作分頁 (limit, cursor)
- [ ] 3.5 實作 `GET /resorts/{resort_id}` - 詳情端點
- [ ] 3.6 實作 404 錯誤處理

---

### 4. ⏳ 創建前端共享類型
**優先級:** P1 (高)  
**預估時間:** 30 分鐘  

#### 子任務：
- [ ] 4.1 創建 `web/src/types/resort.ts`
- [ ] 4.2 統一 Resort 類型定義
- [ ] 4.3 創建 API 響應類型
- [ ] 4.4 更新組件使用共享類型

---

## 🟡 中優先級 - 前端重構

### 5. ⏳ 實作 API 客戶端
**優先級:** P2 (中)  
**預估時間:** 1 小時  

#### 子任務：
- [ ] 5.1 創建 `web/src/lib/api.ts`
- [ ] 5.2 實作 `fetchResorts()` 函式
- [ ] 5.3 實作 `fetchResortById()` 函式
- [ ] 5.4 添加錯誤處理

---

### 6. ⏳ 創建數據獲取 Hooks
**優先級:** P2 (中)  
**預估時間:** 1 小時  

#### 子任務：
- [ ] 6.1 創建 `web/src/hooks/useResorts.ts`
- [ ] 6.2 實作加載狀態
- [ ] 6.3 實作錯誤狀態
- [ ] 6.4 實作數據緩存

---

### 7. ⏳ 重構 page.tsx
**優先級:** P2 (中)  
**預估時間:** 1 小時  

#### 子任務：
- [ ] 7.1 移除 Mock 數據
- [ ] 7.2 使用 API hooks
- [ ] 7.3 添加加載狀態 UI
- [ ] 7.4 添加錯誤狀態 UI
- [ ] 7.5 提取 Header 組件
- [ ] 7.6 提取 ResortList 組件

---

### 8. ⏳ 提取常量
**優先級:** P2 (中)  
**預估時間:** 30 分鐘  

#### 子任務：
- [ ] 8.1 創建 `web/src/constants/index.ts`
- [ ] 8.2 移動 AMENITY_LABELS
- [ ] 8.3 移動 REGIONS
- [ ] 8.4 更新組件引用

---

## 🟢 低優先級 - 優化完善

### 9. ⏳ 添加錯誤邊界
**優先級:** P3 (低)  
**預估時間:** 30 分鐘  

#### 子任務：
- [ ] 9.1 創建 ErrorBoundary 組件
- [ ] 9.2 創建 EmptyState 組件
- [ ] 9.3 創建 LoadingState 組件

---

### 10. ⏳ 樣式優化
**優先級:** P3 (低)  
**預估時間:** 1 小時  

#### 子任務：
- [ ] 10.1 提取共用 Tailwind 類
- [ ] 10.2 創建 Button 組件
- [ ] 10.3 創建 Card 組件

---

### 11. ⏳ 測試
**優先級:** P3 (低)  
**預估時間:** 2 小時  

#### 子任務：
- [ ] 11.1 後端單元測試
- [ ] 11.2 後端 API 測試
- [ ] 11.3 前端組件測試

---

### 12. ⏳ 部署準備
**優先級:** P3 (低)  
**預估時間:** 1 小時  

#### 子任務：
- [ ] 12.1 創建後端 Dockerfile
- [ ] 12.2 更新 docker-compose.yml
- [ ] 12.3 撰寫部署文檔

---

## 📊 進度追蹤

### 總體進度
- **高優先級**: 0/4 完成 (0%)
- **中優先級**: 0/4 完成 (0%)
- **低優先級**: 0/4 完成 (0%)
- **總計**: 0/12 完成 (0%)

### 時間估算
- **高優先級**: 5.5 小時
- **中優先級**: 3.5 小時
- **低優先級**: 4.5 小時
- **總計**: 13.5 小時 (~2 工作日)

---

## 🎯 執行原則

1. **後端優先** - 先完成 API，再重構前端
2. **逐項執行** - 完成一項再開始下一項
3. **測試驗證** - 每項改動都要驗證
4. **向後兼容** - 不破壞現有功能

---

**清單創建完成** ✅  
**等待確認開始執行** ⏳
